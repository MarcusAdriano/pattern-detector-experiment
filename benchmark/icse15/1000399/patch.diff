diff --git a/incubator/aries/trunk/application/application-modeller/src/main/java/org/apache/aries/application/modelling/impl/ImportedServiceImpl.java b/incubator/aries/trunk/application/application-modeller/src/main/java/org/apache/aries/application/modelling/impl/ImportedServiceImpl.java
index 3c387983..cffbb9f3 100644
--- a/incubator/aries/trunk/application/application-modeller/src/main/java/org/apache/aries/application/modelling/impl/ImportedServiceImpl.java
+++ b/incubator/aries/trunk/application/application-modeller/src/main/java/org/apache/aries/application/modelling/impl/ImportedServiceImpl.java
@@ -138,7 +138,7 @@ private Filter generateAttributeFilter (Map<String, String> attrsToPopulate) thr
   @Deprecated
   public ImportedServiceImpl (String ifaceName, Map<String, String> attributes) throws InvalidAttributeException {
     
-    _optional = false;
+    _optional = ("optional".equals(attributes.get("availability:")));
     _iface = ifaceName;
     _isMultiple = false;
     _componentName = null;
diff --git a/incubator/aries/trunk/application/application-modeller/src/test/java/org/apache/aries/application/modelling/impl/ParserProxyImplTest.java b/incubator/aries/trunk/application/application-modeller/src/test/java/org/apache/aries/application/modelling/impl/ParserProxyImplTest.java
index dab8fd36..7dc9e5b2 100644
--- a/incubator/aries/trunk/application/application-modeller/src/test/java/org/apache/aries/application/modelling/impl/ParserProxyImplTest.java
+++ b/incubator/aries/trunk/application/application-modeller/src/test/java/org/apache/aries/application/modelling/impl/ParserProxyImplTest.java
@@ -114,11 +114,11 @@ public void testParseAllServiceElements() throws Exception {
     references.addAll(bpelem.getReferences());
     
     // We expect:
-    // bp.xml: 3 services and a reference
+    // bp.xml: 3 services and 2 references
     // bp2.xml: 3 services and a reference list
     //
     assertTrue ("Six services expected, not " + services.size(), services.size() == 6);
-    assertTrue ("Two references expected, not " + references.size(), references.size() == 2);
+    assertTrue ("Three references expected, not " + references.size(), references.size() == 3);
     
     Set<WrappedServiceMetadata> expectedServices = getTest2ExpectedServices();
     // ServiceResultSet will contain some services with autogenerated names starting '.' so we can't 
@@ -173,6 +173,8 @@ public void checkMultiValues() throws Exception {
          
     expectedResults.add(_modellingManager.getImportedService(false, "foo.bar.MyInjectedService", null, 
         null, "fromOutside", false));
+    expectedResults.add(_modellingManager.getImportedService(true, "foo.bar.MyInjectedService", null, 
+        null, "anotherOptionalReference", false));
     expectedResults.add(_modellingManager.getImportedService(false, "my.logging.service", null, "(&(trace=on)(debug=true))", "refList1", true));
     
     return expectedResults;
