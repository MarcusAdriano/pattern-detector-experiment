diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java b/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java
index f4b8a9b..ece4997 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java
@@ -58,7 +58,9 @@ public static JSONArray asArray(Map<String, Object> map) throws JSONException
 						}
 					}
 				}
-				else if (value.getClass().isArray())
+				else if (value != null)
+				{
+					if (value.getClass().isArray())
 					{
 						Object[] array = (Object[]) value;
 						for (Object v : array)
@@ -74,8 +76,6 @@ else if (value.getClass().isArray())
 					}
 					else
 					{
-					if (value != null)
-					{
 						JSONObject object = new JSONObject();
 						object.put("name", name);
 						object.put("value", value);
